import {
  MalwareEvolution,
  MalwareEvolutionProperties
} from '../../../../contexts/malware-evolution/domain/models/malware-evolution.entity';
import { Primitives } from '../../../../contexts/shared/domain/value-objects/entity';
import {
  MalwareEvolutionPostgresDTO,
  PostgresqlMalwareEvolutionMapper
} from '../../../../contexts/malware-evolution/infrastructure/database/postgresql/postgresql-malware-evolution.mapper';

interface MalwareEvolutionBuilder {
  build(): MalwareEvolution;
  buildDto(): MalwareEvolutionPostgresDTO;
}

export function MalwareEvolutionBuilder(): MalwareEvolutionBuilder {
  const malwareEvolution: Primitives<MalwareEvolutionProperties> = {
    week: 21,
    month: 7,
    year: 2019,
    country: 'ES',
    count: 2021
  };

  return {
    build(): MalwareEvolution {
      return MalwareEvolution.create(malwareEvolution);
    },
    buildDto(): MalwareEvolutionPostgresDTO {
      const mapper = new PostgresqlMalwareEvolutionMapper();
      return mapper.toDto(malwareEvolution);
    }
  };
}
