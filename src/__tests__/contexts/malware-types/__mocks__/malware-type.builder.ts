import { Primitives } from '../../../../contexts/shared/domain/value-objects/entity';
import {
  MalwareType,
  MalwareTypeProperties
} from '../../../../contexts/malware-types/domain/models/malware-type.entity';
import {
  MalwareTypePostgresDTO,
  PostgresqlMalwareTypeMapper
} from '../../../../contexts/malware-types/infrastructure/database/postgresql/postgresql-malware-type.mapper';

interface MalwareTypeBuilder {
  build(): MalwareType;
  buildDto(): MalwareTypePostgresDTO;
}

export function MalwareTypeBuilder(): MalwareTypeBuilder {
  const malwareType: Primitives<MalwareTypeProperties> = {
    malwareType: 'Arkei',
    country: 'ES',
    result: 2021
  };

  return {
    build(): MalwareType {
      return MalwareType.create(malwareType);
    },
    buildDto(): MalwareTypePostgresDTO {
      const mapper = new PostgresqlMalwareTypeMapper();
      return mapper.toDto(malwareType);
    }
  };
}
